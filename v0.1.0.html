<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Tyco Specification v0.1.0</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.6;
      color: #333;
      scroll-padding-top: 80px;
    }

    .banner {
      position: sticky;
      top: 0;
      background: #ffffff;
      border-bottom: 1px solid #e5e7eb;
      padding: 0.5rem 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 100;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    }

    .brand {
      display: flex;
      align-items: baseline;
      gap: 0;
      font-size: 1.75rem;
      font-weight: 700;
      color: #111827;
      text-decoration: none;
    }

    .brand-ty,
    .brand-co {
      color: #1e6fff;
    }

    .brand-ped,
    .brand-nfig {
      color: #111827;
    }

    .nav-actions {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .spec-selector {
      padding: 0.5rem 0.75rem;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      background: #ffffff;
      color: #374151;
      font-size: 0.875rem;
      cursor: pointer;
      outline: none;
      transition: border-color 0.2s;
    }

    .spec-selector:hover {
      border-color: #1e6fff;
    }

    .spec-selector:focus {
      border-color: #1e6fff;
      box-shadow: 0 0 0 3px rgba(30, 111, 255, 0.1);
    }

    .gh-link {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background: #111827;
      color: #ffffff;
      text-decoration: none;
      border-radius: 6px;
      font-size: 0.875rem;
      font-weight: 500;
      transition: background 0.2s;
    }

    .gh-link:hover {
      background: #1f2937;
    }

    .gh-icon {
      width: 20px;
      height: 20px;
    }

    .spec-wrap {
      max-width: 1200px;
      margin: 0 auto 0 0;
      padding: 2rem 1.5rem 2rem 1rem;
      display: flex;
      gap: 2rem;
    }

    .spec-sidebar {
      width: 172px;
      flex-shrink: 0;
      position: sticky;
      top: 80px;
      align-self: flex-start;
      max-height: calc(100vh - 100px);
      overflow-y: auto;
    }

    .spec-sidebar h3 {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: #9ca3af;
      margin-bottom: 0.5rem;
      font-weight: 600;
    }

    .spec-sidebar nav {
      display: flex;
      flex-direction: column;
      gap: 0.125rem;
    }

    .spec-sidebar a {
      color: #4b5563;
      text-decoration: none;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-size: 0.9rem;
      transition: all 0.2s;
      border-left: 2px solid transparent;
    }

    .spec-sidebar a:hover {
      background: #f3f4f6;
      color: #1e6fff;
      border-left-color: #1e6fff;
    }

    .spec-sidebar a.active {
      background: #eff6ff;
      color: #1e6fff;
      border-left-color: #1e6fff;
      font-weight: 500;
    }

    .spec-sidebar a.nav-indent {
      padding-left: 1.5rem;
      font-size: 0.85rem;
      color: #6b7280;
    }

    .spec-sidebar a.nav-indent:hover {
      color: #1e6fff;
    }

    .spec-content {
      flex: 1;
      max-width: 900px;
      min-width: 0;
    }

    @media (max-width: 768px) {
      .spec-wrap {
        flex-direction: column;
      }

      .spec-sidebar {
        display: none;
      }
    }

    .spec-content h1 {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
      color: #111827;
      scroll-margin-top: 100px;
    }

    .spec-content .version {
      font-size: 1rem;
      color: #6b7280;
      margin-bottom: 2rem;
    }

    .spec-content h2 {
      font-size: 1.75rem;
      margin-top: 3rem;
      margin-bottom: 1rem;
      color: #111827;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid #e5e7eb;
      scroll-margin-top: 100px;
    }

    .spec-content h3 {
      font-size: 1.25rem;
      margin-top: 2rem;
      margin-bottom: 0.75rem;
      color: #111827;
      scroll-margin-top: 100px;
    }

    .spec-content h4 {
      font-size: 1.1rem;
      margin-top: 1.5rem;
      margin-bottom: 0.5rem;
      color: #374151;
      scroll-margin-top: 100px;
    }

    .spec-content p {
      margin-bottom: 1rem;
      color: #4b5563;
    }

    .spec-content ul, .spec-content ol {
      margin-bottom: 1rem;
      padding-left: 1.5rem;
      color: #4b5563;
    }

    .spec-content li {
      margin-bottom: 0.5rem;
    }

    .spec-content code {
      background: #f3f4f6;
      padding: 0.125rem 0.375rem;
      border-radius: 3px;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      font-size: 0.875em;
      color: #1e6fff;
    }

    .spec-content pre {
      background: #0f1419;
      color: #e5e7eb;
      padding: 1.25rem;
      border-radius: 8px;
      overflow-x: auto;
      margin-bottom: 1.5rem;
      border: 1px solid #1f2937;
    }

    .spec-content pre code {
      background: transparent;
      padding: 0;
      color: inherit;
    }

    .spec-content table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 1.5rem;
    }

    .spec-content th,
    .spec-content td {
      padding: 0.2rem 0.75rem;
      text-align: left;
      border-bottom: 1px solid #e5e7eb;
    }

    .spec-content th {
      background: #f9fafb;
      font-weight: 600;
      color: #111827;
    }

    .spec-content tr:hover {
      background: #f9fafb;
    }

    .spec-content blockquote {
      border-left: 4px solid #1e6fff;
      padding-left: 1rem;
      margin: 1.5rem 0;
      color: #4b5563;
      font-style: italic;
    }

    .spec-content .note {
      background: #eff6ff;
      border-left: 4px solid #1e6fff;
      padding: 1rem;
      margin: 1.5rem 0;
      border-radius: 4px;
    }

    .spec-content .note p:last-child {
      margin-bottom: 0;
    }

    .tok-type { color: #fbffba; }
    .tok-key { color: #73b2ff; font-weight: 600; }
    .tok-string { color: #7ad98a; }
    .tok-comment { color: #6b8aa2; font-style: italic; }
    .tok-number { color: #ffb86b; }
    .tok-boolean { color: #d58bff; }
    .tok-obj { color: #f6ad55; }
  </style>
</head>
<body>
  <header class="banner">
    <a href="index.html" class="brand">
      <span class="brand-ty">Ty</span><span class="brand-ped">ped</span> <span class="brand-co">Co</span><span class="brand-nfig">nfig</span>
    </a>
    
    <nav class="nav-actions">
      <select class="spec-selector" id="spec-version" aria-label="Spec Version">
        <option value="">Spec</option>
        <option value="0.1.0" selected>v0.1.0</option>
      </select>
      
      <a href="https://github.com/typedconfig" class="gh-link" target="_blank" rel="noopener" aria-label="View on GitHub">
        <svg class="gh-icon" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true">
          <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.01.08-2.1 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.09.16 1.9.08 2.1.51.56.82 1.28.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.19 0 .21.15.46.55.38C13.71 14.53 16 11.54 16 8c0-4.42-3.58-8-8-8z"/>
        </svg>
      </a>
    </nav>
  </header>

  <div class="spec-wrap">
    <aside class="spec-sidebar">
      
      <nav>
        <a href="#introduction">Introduction</a>
        <a href="#example">Complete Example</a>
        <a href="#features">Features</a>
        <a href="#spec">Specification</a>
        <a href="#comment">Comment</a>
        <a href="#basic-types">Basic Types</a>
        <a href="#string" class="nav-indent">String</a>
        <a href="#integer" class="nav-indent">Integer</a>
        <a href="#float" class="nav-indent">Float</a>
        <a href="#decimal" class="nav-indent">Decimal</a>
        <a href="#boolean" class="nav-indent">Boolean</a>
        <a href="#datetime" class="nav-indent">Date & Time</a>
        <a href="#array" class="nav-indent">Array</a>
        <a href="#global">Global Attributes</a>
        <a href="#structs">Structs</a>
        <a href="#struct" class="nav-indent">Struct Definition</a>
        <a href="#schema" class="nav-indent">Schema Declaration</a>
        <a href="#defaults" class="nav-indent">Default Values</a>
        <a href="#instances" class="nav-indent">Struct Instances</a>
        <a href="#references">Object References</a>
        <a href="#templates">String Templates</a>
        <a href="#include">Include Directive</a>
        <a href="#directory-loading">Directory Loading</a>
        <a href="#validation">Validation</a>
        <a href="#abnf">ABNF Grammar</a>
      </nav>
    </aside>
    <div class="spec-content">
      <h2 id="introduction">Introduction</h2>
      <p>Tyco (Typed Config) is a configuration file format designed for explicit typing, readability, and composability. Unlike formats that infer types from values, Tyco requires explicit type annotations, making configurations self-documenting and eliminating ambiguity.</p>
      
      <p>Tyco is designed for:</p>
      <ul>
        <li>Configuration files with complex, relational data structures</li>
        <li>Systems requiring type safety and validation</li>
        <li>Teams that value explicit, auditable configuration</li>
        <li>Applications needing to map configuration to strongly-typed native objects</li>
      </ul>

      <h2 id="example">Complete Example</h2>
      <p>Here is a complete example demonstrating many of Tyco's features:</p>

      <pre><code><span class="tok-comment"># Global configuration</span>
<span class="tok-type">str</span> <span class="tok-key">environment</span>: <span class="tok-string">production</span>
<span class="tok-type">str</span> <span class="tok-key">region</span>: <span class="tok-string">us-east-1</span>

<span class="tok-comment"># Database definitions</span>
<span class="tok-key">Database</span>:
 *<span class="tok-type">str</span> <span class="tok-key">name</span>:
  <span class="tok-type">str</span> <span class="tok-key">host</span>:
  <span class="tok-type">int</span> <span class="tok-key">port</span>: <span class="tok-number">3306</span>
  <span class="tok-type">bool</span> <span class="tok-key">ssl</span>: <span class="tok-boolean">true</span>
  - <span class="tok-string">primary</span>, <span class="tok-string">db1.example.com</span>
  - <span class="tok-string">replica</span>, <span class="tok-string">db2.example.com</span>, <span class="tok-key">ssl</span>: <span class="tok-boolean">false</span>

<span class="tok-comment"># Server definitions</span>
<span class="tok-key">Server</span>:
 *<span class="tok-type">str</span> <span class="tok-key">hostname</span>:
  <span class="tok-type">str</span> <span class="tok-key">ip</span>:
  <span class="tok-type">int</span> <span class="tok-key">cores</span>:
  <span class="tok-type">bool</span> <span class="tok-key">ssd</span>: <span class="tok-boolean">true</span>
 ?<span class="tok-type">str</span> <span class="tok-key">notes</span>:
  - <span class="tok-string">web-01</span>, <span class="tok-string">10.0.1.10</span>, <span class="tok-number">8</span>
  - <span class="tok-string">web-02</span>, <span class="tok-string">10.0.1.11</span>, <span class="tok-number">8</span>
  - <span class="tok-string">db-01</span>, <span class="tok-string">10.0.2.10</span>, <span class="tok-number">16</span>, <span class="tok-key">notes</span>: <span class="tok-string">"High memory instance"</span>

<span class="tok-comment"># Application definitions</span>
<span class="tok-key">Application</span>:
 *<span class="tok-type">str</span> <span class="tok-key">name</span>:
  <span class="tok-type">str</span> <span class="tok-key">version</span>:
  <span class="tok-type">Server</span> <span class="tok-key">server</span>:
  <span class="tok-type">Database</span> <span class="tok-key">database</span>:
  <span class="tok-type">int[]</span> <span class="tok-key">ports</span>:
  <span class="tok-type">str</span> <span class="tok-key">url</span>:
  - <span class="tok-string">web-app</span>, <span class="tok-string">2.1.0</span>, <span class="tok-obj">Server(web-01)</span>, <span class="tok-obj">Database(primary)</span>, \
    <span class="tok-key">ports</span>: <span class="tok-string">[80, 443]</span>, <span class="tok-key">url</span>: <span class="tok-string">"https://{name}.{global.region}.example.com"</span>
  - <span class="tok-string">api</span>, <span class="tok-string">1.5.3</span>, <span class="tok-obj">Server(web-02)</span>, <span class="tok-obj">Database(replica)</span>, \
    <span class="tok-key">ports</span>: <span class="tok-string">[8080]</span>, <span class="tok-key">url</span>: <span class="tok-string">"https://{name}.{server.hostname}:8080"</span>
</code></pre>

      <h2 id="features">Features</h2>
      <p>Tyco provides a rich set of features for building type-safe, maintainable configuration files:</p>

      <h3>Type System</h3>
      <ul>
        <li><strong>Explicit Type Annotations</strong> — All values declare type: <code>str</code>, <code>int</code>, <code>float</code>, <code>decimal</code>, <code>bool</code>, <code>date</code>, <code>time</code>, <code>datetime</code></li>
        <li><strong>Custom Struct Types</strong> — Define structured data types with named fields and type constraints</li>
        <li><strong>Array Types</strong> — Declare arrays of any type with <code>[]</code> suffix notation</li>
        <li><strong>Nullable Types</strong> — Mark optional fields with <code>?</code> prefix to allow <code>null</code> values</li>
        <li><strong>Type Validation</strong> — Parser enforces type correctness at parse time</li>
      </ul>

      <h3>Data Structures</h3>
      <ul>
        <li><strong>Global Attributes</strong> — Top-level key-value pairs accessible throughout the configuration</li>
        <li><strong>Struct Definitions</strong> — Reusable schemas with field types and constraints</li>
        <li><strong>Struct Instances</strong> — Create multiple instances of a struct with compact row syntax</li>
        <li><strong>Arrays</strong> — Homogeneous collections with <code>[value1, value2, ...]</code> syntax</li>
        <li><strong>Nested Structures</strong> — Structs can contain other struct types as fields</li>
      </ul>

      <h3>References & Relations</h3>
      <ul>
        <li><strong>Primary Keys</strong> — Mark fields with <code>*</code> to enable lookups and references</li>
        <li><strong>Object References</strong> — Reference existing objects with <code>TypeName(key)</code> syntax</li>
        <li><strong>Inline Object Creation</strong> — Create objects inline with <code>TypeName(value1, value2, ...)</code></li>
        <li><strong>Relational Data</strong> — Build normalized, relational configuration structures</li>
      </ul>

      <h3>String Features</h3>
      <ul>
        <li><strong>Basic Strings</strong> — Double-quoted strings with escape sequences (<code>\n</code>, <code>\t</code>, <code>\u0000</code>, etc.)</li>
        <li><strong>Literal Strings</strong> — Single-quoted strings with no escape processing</li>
        <li><strong>Multi-line Strings</strong> — Triple-quoted variants (<code>"""</code> and <code>'''</code>) for multi-line text</li>
        <li><strong>Template Interpolation</strong> — Embed field references with <code>{field}</code> syntax</li>
        <li><strong>Nested Field Access</strong> — Access referenced object fields with <code>{object.field}</code></li>
        <li><strong>Parent Traversal</strong> — Reference parent scope explicitly with <code>{..field}</code></li>
        <li><strong>Global Access</strong> — Access global variables from structs with <code>{global.field}</code></li>
        <li><strong>Line Continuation</strong> — Use trailing backslash to continue strings across lines</li>
      </ul>

      <h3>Number Formats</h3>
      <ul>
        <li><strong>Decimal Integers</strong> — Standard base-10 notation: <code>42</code>, <code>-17</code></li>
        <li><strong>Hexadecimal</strong> — <code>0x</code> prefix for base-16: <code>0x1F</code>, <code>0xFF</code></li>
        <li><strong>Octal</strong> — <code>0o</code> prefix for base-8: <code>0o755</code>, <code>0o644</code></li>
        <li><strong>Binary</strong> — <code>0b</code> prefix for base-2: <code>0b1010</code>, <code>0b11111111</code></li>
        <li><strong>Floating Point</strong> — Decimal numbers with fractional parts: <code>3.14</code>, <code>-0.001</code></li>
        <li><strong>Arbitrary Precision Decimals</strong> — Fixed-point numbers for exact arithmetic: <code>99.95</code>, <code>0.0825</code></li>
      </ul>

      <h3>Defaults & Reusability</h3>
      <ul>
        <li><strong>Default Values</strong> — Set defaults in schema or as separate declarations</li>
        <li><strong>Value Inheritance</strong> — Instances inherit defaults unless overridden</li>
        <li><strong>DRY Principle</strong> — Avoid repetition with defaults and references</li>
      </ul>

      <h3>Composition & Organization</h3>
      <ul>
        <li><strong>Include Directive</strong> — Split configuration across files with <code>#include path</code></li>
        <li><strong>Directory Loading</strong> — Load entire directory structures recursively</li>
        <li><strong>Comments</strong> — Document configuration with <code>#</code> line comments</li>
        <li><strong>Mixed Syntax</strong> — Combine positional and named values in instance declarations</li>
        <li><strong>Line Continuation</strong> — Split long declarations with trailing backslash</li>
      </ul>

      <h3>Design Principles</h3>
      <ul>
        <li><strong>Explicit Over Implicit</strong> — All scope access is clearly marked (<code>global.</code>, <code>..</code>)</li>
        <li><strong>No Surprises</strong> — No automatic namespace resolution or hidden variable lookup</li>
        <li><strong>Clear Syntax</strong> — Unquoted values with colons must be explicitly quoted to prevent accidents</li>
        <li><strong>Predictable Behavior</strong> — Template expansion follows explicit rules with visible scope markers</li>
        <li><strong>Reserved Words</strong> — Avoid <code>global</code> as field names to prevent conflicts with scope access</li>
      </ul>

      <h3>Language Integration</h3>
      <ul>
        <li><strong>Validation Modules</strong> — Language-specific validation and custom constructors</li>
        <li><strong>Type Safety</strong> — Native object mapping with compile-time type checking</li>
        <li><strong>Custom Logic</strong> — Implement domain-specific validation rules</li>
        <li><strong>Error Integration</strong> — Validation errors map to configuration source locations</li>
      </ul>

      <h3>Date & Time Support</h3>
      <ul>
        <li><strong>ISO 8601 Format</strong> — Standard date and time representations</li>
        <li><strong>Date Type</strong> — Calendar dates in <code>YYYY-MM-DD</code> format</li>
        <li><strong>Time Type</strong> — Time of day in <code>HH:MM:SS</code> format</li>
        <li><strong>Datetime Type</strong> — Combined date and time with timezone support</li>
      </ul>

      <h3>Developer Experience</h3>
      <ul>
        <li><strong>Self-Documenting</strong> — Type annotations make configuration intent clear</li>
        <li><strong>Editor-Friendly</strong> — Simple syntax works well in text editors and terminals</li>
        <li><strong>Error Detection</strong> — Type mismatches caught at parse time, not runtime</li>
        <li><strong>Linting Support</strong> — Built-in validation for missing fields and type errors</li>
        <li><strong>Line Attribution</strong> — Errors map to specific file and line numbers</li>
      </ul>

      <h2 id="spec">Specification</h2>
      <p>This document defines Tyco version 0.1.0. A Tyco file must be a valid UTF-8 encoded Unicode document.</p>
      
      <p>Whitespace means tab (0x09) or space (0x20). Newline means LF (0x0A) or CRLF (0x0D 0x0A).</p>

      <h2 id="comment">Comment</h2>
      <p>A hash symbol (<code>#</code>) marks the rest of the line as a comment, which is ignored by parsers.</p>

      <pre><code><span class="tok-comment"># This is a full-line comment</span>
<span class="tok-type">str</span> <span class="tok-key">timezone</span>: <span class="tok-string">UTC</span>  <span class="tok-comment"># This is an end-of-line comment</span></code></pre>

      <p>Comments cannot contain control characters other than tab (U+0009).</p>

      <h2 id="basic-types">Basic Types</h2>
      <p>Tyco provides a comprehensive set of built-in data types for configuration values. Each type has specific syntax and validation rules:</p>

      <ul>
        <li><strong><code>str</code></strong> — Text values with support for quotes, escaping, and templates</li>
        <li><strong><code>int</code></strong> — Whole numbers (decimal, hex, octal, binary formats supported)</li>
        <li><strong><code>float</code></strong> — Floating-point numbers with decimal notation</li>
        <li><strong><code>decimal</code></strong> — Arbitrary-precision numbers for exact arithmetic</li>
        <li><strong><code>bool</code></strong> — Boolean values using <code>true</code> and <code>false</code> keywords</li>
        <li><strong><code>date</code></strong> — Calendar dates in <code>YYYY-MM-DD</code> format</li>
        <li><strong><code>time</code></strong> — Time of day in <code>HH:MM:SS</code> format</li>
        <li><strong><code>datetime</code></strong> — Combined date and time with optional timezone</li>
        <li><strong><code>type[]</code></strong> — Arrays of any type using <code>[value1, value2, ...]</code> syntax</li>
      </ul>

      <p>All values in Tyco must explicitly declare their type, enabling strong type checking and eliminating ambiguity. Arrays can be created for any type by adding <code>[]</code> after the type name.</p>

      <h2 id="string">String</h2>
      <p>Strings are sequences of Unicode characters. Tyco supports both basic strings (with escape sequences) and literal strings (without escape processing).</p>

      <h3>Unquoted Strings</h3>
      <p>For the majority of configuration values, quotes are not required at all and can be safely omitted. Simple values like hostnames, names, and identifiers work perfectly without quotes:</p>

      <pre><code><span class="tok-type">str</span> <span class="tok-key">hostname</span>: server1.example.com
<span class="tok-type">str</span> <span class="tok-key">environment</span>: production
<span class="tok-type">str</span> <span class="tok-key">region</span>: us-east-1</code></pre>

      <h3>When to Quote Values</h3>
      <p>Use quoted strings when your content contains syntax characters that could be interpreted as delimiters or structural elements:</p>
      
      <pre><code><span class="tok-comment"># URLs with colons, query parameters with commas</span>
<span class="tok-type">str</span> <span class="tok-key">api_url</span>: <span class="tok-string">'https://api.example.com/search?q=python,java&limit=10'</span>

<span class="tok-comment"># Descriptions with commas</span>
<span class="tok-type">str</span> <span class="tok-key">description</span>: <span class="tok-string">'A fast, reliable, and secure service'</span>

<span class="tok-comment"># Values with brackets, parentheses, or braces</span>
<span class="tok-type">str</span> <span class="tok-key">expression</span>: <span class="tok-string">'func(arg1, arg2)'</span>
<span class="tok-type">str</span> <span class="tok-key">template</span>: <span class="tok-string">'{variable} with literal braces'</span></code></pre>

      <p><strong>No quotes needed for:</strong> Simple hostnames, paths, version numbers, and times (since times start with digits and can't be confused with field names):</p>
      
      <pre><code><span class="tok-type">str</span> <span class="tok-key">hostname</span>: api.example.com
<span class="tok-type">str</span> <span class="tok-key">version</span>: 1.2.3
<span class="tok-type">str</span> <span class="tok-key">start_time</span>: 14:30:00</code></pre>

      <p>Unquoted strings undergo template expansion (replacing <code>{variable}</code> references), while literal strings (using single quotes) disable this behavior.</p>

      <h3>Basic Strings</h3>
      <p>Basic strings are surrounded by double quotes (<code>"</code>). Any Unicode character may be used except those that must be escaped: backslash (<code>\</code>) and the double quote (<code>"</code>). Basic strings support template expansion.</p>

      <pre><code><span class="tok-type">str</span> <span class="tok-key">message</span>: <span class="tok-string">"Hello, world!"</span>
<span class="tok-type">str</span> <span class="tok-key">path</span>: <span class="tok-string">"C:\\Users\\name"</span></code></pre>

      <p>Escape sequences:</p>
      <table>
        <thead>
          <tr>
            <th>Escape</th>
            <th>Unicode</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr><td><code>\b</code></td><td>U+0008</td><td>backspace</td></tr>
          <tr><td><code>\t</code></td><td>U+0009</td><td>tab</td></tr>
          <tr><td><code>\n</code></td><td>U+000A</td><td>linefeed</td></tr>
          <tr><td><code>\f</code></td><td>U+000C</td><td>form feed</td></tr>
          <tr><td><code>\r</code></td><td>U+000D</td><td>carriage return</td></tr>
          <tr><td><code>\"</code></td><td>U+0022</td><td>quote</td></tr>
          <tr><td><code>\\</code></td><td>U+005C</td><td>backslash</td></tr>
          <tr><td><code>\uXXXX</code></td><td>—</td><td>Unicode (4 hex digits)</td></tr>
          <tr><td><code>\UXXXXXXXX</code></td><td>—</td><td>Unicode (8 hex digits)</td></tr>
        </tbody>
      </table>

      <h3>Multi-line Basic Strings</h3>
      <p>Multi-line basic strings are surrounded by three double quotes (<code>"""</code>). Newlines are allowed and will be preserved.</p>

      <pre><code><span class="tok-type">str</span> <span class="tok-key">poem</span>: <span class="tok-string">"""
Roses are red
Violets are blue
Tyco is typed
And you're my type too"""</span></code></pre>

      <p>A backslash at the end of a line will trim all whitespace (including newlines) up to the next non-whitespace character or closing delimiter.</p>

      <pre><code><span class="tok-type">str</span> <span class="tok-key">long</span>: <span class="tok-string">"""This is a \
    very long \
    sentence."""</span>  <span class="tok-comment"># Renders as: "This is a very long sentence."</span></code></pre>

      <h3>Literal Strings</h3>
      <p>Literal strings are surrounded by single quotes (<code>'</code>). No escape sequences are processed, and template expansion is disabled. What you see is what you get. Use literal strings when you need the exact text without any processing.</p>

      <pre><code><span class="tok-type">str</span> <span class="tok-key">winpath</span>: <span class="tok-string">'C:\Users\name'</span>  <span class="tok-comment"># Backslashes are literal</span>
<span class="tok-type">str</span> <span class="tok-key">regex</span>: <span class="tok-string">'\d{2}-\w+'</span>
<span class="tok-type">str</span> <span class="tok-key">template</span>: <span class="tok-string">'{variable}'</span>  <span class="tok-comment"># No template expansion - literal {variable}</span></code></pre>

      <h3>Multi-line Literal Strings</h3>
      <p>Multi-line literal strings are surrounded by three single quotes (<code>'''</code>).</p>

      <pre><code><span class="tok-type">str</span> <span class="tok-key">lines</span>: <span class="tok-string">'''
First line
Second line'''</span></code></pre>

      <h2 id="integer">Integer</h2>
      <p>Integers are whole numbers. Positive integers may be prefixed with a plus (<code>+</code>). Negative integers are prefixed with a minus (<code>-</code>).</p>

      <pre><code><span class="tok-type">int</span> <span class="tok-key">count</span>: <span class="tok-number">42</span>
<span class="tok-type">int</span> <span class="tok-key">negative</span>: <span class="tok-number">-17</span>
<span class="tok-type">int</span> <span class="tok-key">positive</span>: <span class="tok-number">+99</span></code></pre>

      <h3>Integer Formats</h3>
      <p>Tyco supports hexadecimal, octal, and binary representations:</p>

      <pre><code><span class="tok-comment"># Hexadecimal with prefix 0x</span>
<span class="tok-type">int</span> <span class="tok-key">hex</span>: <span class="tok-number">0x1F</span>  <span class="tok-comment"># 31 in decimal</span>

<span class="tok-comment"># Octal with prefix 0o</span>
<span class="tok-type">int</span> <span class="tok-key">octal</span>: <span class="tok-number">0o755</span>  <span class="tok-comment"># 493 in decimal</span>

<span class="tok-comment"># Binary with prefix 0b</span>
<span class="tok-type">int</span> <span class="tok-key">binary</span>: <span class="tok-number">0b11010110</span>  <span class="tok-comment"># 214 in decimal</span></code></pre>

      <h2 id="float">Float</h2>
      <p>Floats are numbers with a fractional component. They must contain a decimal point.</p>

      <pre><code><span class="tok-type">float</span> <span class="tok-key">pi</span>: <span class="tok-number">3.14159</span>
<span class="tok-type">float</span> <span class="tok-key">negative</span>: <span class="tok-number">-0.001</span>
<span class="tok-type">float</span> <span class="tok-key">version</span>: <span class="tok-number">1.0</span></code></pre>

      <h2 id="decimal">Decimal</h2>
      <p>Decimals are arbitrary-precision numbers with a fixed number of decimal places. Unlike floats, decimals avoid floating-point precision errors, making them ideal for financial calculations, currencies, and other applications requiring exact decimal arithmetic.</p>

      <pre><code><span class="tok-type">decimal</span> <span class="tok-key">price</span>: <span class="tok-number">99.95</span>
<span class="tok-type">decimal</span> <span class="tok-key">tax_rate</span>: <span class="tok-number">0.0825</span>
<span class="tok-type">decimal</span> <span class="tok-key">balance</span>: <span class="tok-number">-1234.56</span></code></pre>

      <h3>Syntax</h3>
      <p>Decimal values use the same numeric syntax as floats but are interpreted with arbitrary precision. Both positive and negative values are supported.</p>

      <pre><code><span class="tok-type">decimal</span> <span class="tok-key">amount</span>: <span class="tok-number">1234567.89</span>
<span class="tok-type">decimal</span> <span class="tok-key">precise</span>: <span class="tok-number">0.123456789012345</span></code></pre>

      <h3>Language Implementation</h3>
      <p>Parser implementations map decimal values to appropriate types in the target language:</p>

      <ul>
        <li><strong>Python</strong> — <code>decimal.Decimal</code> from the standard library</li>
        <li><strong>Java</strong> — <code>java.math.BigDecimal</code></li>
        <li><strong>C#</strong> — <code>System.Decimal</code></li>
        <li><strong>JavaScript</strong> — Custom <code>Decimal</code> class holding integer value and scale</li>
        <li><strong>Go</strong> — Third-party decimal library (e.g., <code>shopspring/decimal</code>)</li>
        <li><strong>Rust</strong> — Third-party crate (e.g., <code>rust_decimal</code>)</li>
      </ul>

      <h3>Custom Decimal Class</h3>
      <p>For languages without built-in decimal support, parsers implement a lightweight decimal representation:</p>

      <pre><code><span class="tok-comment">// Example JavaScript implementation</span>
class Decimal {
  constructor(value, scale) {
    this.value = value;  <span class="tok-comment">// Integer representation</span>
    this.scale = scale;  <span class="tok-comment">// Number of decimal places</span>
  }
  
  toString() {
    const str = this.value.toString();
    if (this.scale === 0) return str;
    
    const negative = str.startsWith('-');
    const digits = negative ? str.slice(1) : str;
    const padded = digits.padStart(this.scale + 1, '0');
    const whole = padded.slice(0, -this.scale) || '0';
    const fraction = padded.slice(-this.scale);
    
    return (negative ? '-' : '') + whole + '.' + fraction;
  }
}</code></pre>

      <div class="note">
        <p><strong>Note:</strong> Custom decimal implementations typically store only the representation (value and scale) and delegate arithmetic operations to external libraries or user code. This ensures accurate decimal representation without complex arithmetic implementation.</p>
      </div>

      <h2 id="boolean">Boolean</h2>
      <p>Booleans are represented by the lowercase keywords <code>true</code> and <code>false</code>.</p>

      <pre><code><span class="tok-type">bool</span> <span class="tok-key">enabled</span>: <span class="tok-boolean">true</span>
<span class="tok-type">bool</span> <span class="tok-key">debug</span>: <span class="tok-boolean">false</span></code></pre>

      <h2 id="datetime">Date & Time</h2>
      <p>Tyco supports date, time, and datetime values using ISO 8601 format.</p>

      <h3>Date</h3>
      <pre><code><span class="tok-type">date</span> <span class="tok-key">birthday</span>: <span class="tok-string">1990-05-15</span>  <span class="tok-comment"># YYYY-MM-DD</span></code></pre>

      <h3>Time</h3>
      <pre><code><span class="tok-type">time</span> <span class="tok-key">alarm</span>: <span class="tok-string">07:30:00</span>  <span class="tok-comment"># HH:MM:SS</span></code></pre>

      <h3>Datetime</h3>
      <p>Datetime values combine date and time components. The standard ISO 8601 format uses a "T" separator, but this can be omitted and replaced with a space for improved readability:</p>

      <pre><code><span class="tok-comment"># Standard ISO 8601 format with T separator</span>
<span class="tok-type">datetime</span> <span class="tok-key">created</span>: <span class="tok-string">2024-01-15T14:30:00</span>
<span class="tok-type">datetime</span> <span class="tok-key">updated</span>: <span class="tok-string">2024-01-15T14:30:00Z</span>  <span class="tok-comment"># With timezone</span>

<span class="tok-comment"># Alternative format with space separator (more readable)</span>
<span class="tok-type">datetime</span> <span class="tok-key">started</span>: <span class="tok-string">2024-01-15 14:30:00</span>
<span class="tok-type">datetime</span> <span class="tok-key">finished</span>: <span class="tok-string">2024-01-15 14:30:00Z</span>  <span class="tok-comment"># With timezone</span></code></pre>

      <p>Both formats are equivalent and supported by Tyco parsers. The space-separated format is often preferred in configuration files for better human readability.</p>

      <h2 id="array">Array</h2>
      <p>Arrays are collections of values enclosed in square brackets. Values are separated by commas. Trailing commas are allowed and can improve readability when arrays span multiple lines.</p>

      <pre><code><span class="tok-type">int[]</span> <span class="tok-key">ports</span>: <span class="tok-string">[</span><span class="tok-number">80</span><span class="tok-string">,</span> <span class="tok-number">443</span><span class="tok-string">,</span> <span class="tok-number">8080</span><span class="tok-string">]</span>
<span class="tok-type">str[]</span> <span class="tok-key">tags</span>: <span class="tok-string">["production", "web", "critical"]</span></code></pre>

      <p>Arrays can span multiple lines:</p>

      <pre><code><span class="tok-type">str[]</span> <span class="tok-key">servers</span>: <span class="tok-string">[
  "server1.example.com",
  "server2.example.com",
  "server3.example.com",  <span class="tok-comment"># Trailing comma allowed</span>
]</span></code></pre>

      <p>Empty arrays are allowed:</p>

      <pre><code><span class="tok-type">int[]</span> <span class="tok-key">empty</span>: <span class="tok-string">[]</span></code></pre>

      <h2 id="global">Global Attributes</h2>
      <p>Global attributes are top-level key-value pairs that are accessible throughout the configuration. Struct instances can access global variables in templates using the explicit <code>{global.field}</code> syntax.</p>

      <pre><code><span class="tok-type">str</span> <span class="tok-key">timezone</span>: <span class="tok-string">UTC</span>
<span class="tok-type">str</span> <span class="tok-key">environment</span>: <span class="tok-string">production</span>
<span class="tok-type">int</span> <span class="tok-key">max_connections</span>: <span class="tok-number">1000</span></code></pre>

      <p><strong>Note:</strong> The word <code>global</code> is semi-reserved for template access to global scope. As a best practice, avoid using <code>global</code> as a field name in struct definitions to prevent conflicts with the global access mechanism. See <a href="#templates">String Templates</a> for more information on global variable access in templates.</p>

      <h3>Nullable Globals</h3>
      <p>Global attributes can be marked as nullable by prefixing the type with <code>?</code>. Nullable attributes can have the value <code>null</code>.</p>

      <pre><code><span class="tok-type">?str</span> <span class="tok-key">optional_setting</span>: <span class="tok-string">null</span>
<span class="tok-type">?int</span> <span class="tok-key">timeout</span>: <span class="tok-number">30</span></code></pre>

      <h2 id="structs">Structs</h2>
      <p>Structs are the core building blocks of Tyco, allowing you to define custom data types with strongly-typed fields. The struct system provides four main capabilities:</p>
      
      <ul>
        <li><strong>Struct Definition</strong> - Define new data types with a name and field structure</li>
        <li><strong>Schema Declaration</strong> - Specify field types, constraints, and optional modifiers like primary keys and nullable fields</li>
        <li><strong>Default Values</strong> - Set default values for fields either inline or in separate declarations</li>
        <li><strong>Struct Instances</strong> - Create actual data objects using positional or named field assignments</li>
      </ul>

      <p>Structs support advanced features including primary keys for references, nullable fields, array types, and inheritance through default value cascading.</p>

      <h2 id="struct">Struct Definition</h2>
      <p>Structs define structured data types with named fields. A struct definition begins with a capitalized identifier followed by a colon.</p>

      <pre><code><span class="tok-key">Server</span>:
  <span class="tok-type">str</span> <span class="tok-key">hostname</span>:
  <span class="tok-type">int</span> <span class="tok-key">port</span>:
  <span class="tok-type">bool</span> <span class="tok-key">ssl</span>:</code></pre>

      <h2 id="schema">Schema Declaration</h2>
      <p>The schema section defines the structure and types of a struct's fields. Each field declaration consists of a type, field name, and optional default value or modifiers.</p>

      <h3>Field Syntax</h3>
      <pre><code>[<span class="tok-string">modifier</span>]<span class="tok-type">type</span>[<span class="tok-string">[]</span>] <span class="tok-key">field_name</span>: [<span class="tok-string">default_value</span>]</code></pre>

      <h3>Primary Keys</h3>
      <p>Fields marked with an asterisk (<code>*</code>) are primary keys, used for object lookups and references.</p>

      <pre><code><span class="tok-key">User</span>:
 *<span class="tok-type">str</span> <span class="tok-key">username</span>:  <span class="tok-comment"># Primary key</span>
  <span class="tok-type">str</span> <span class="tok-key">email</span>:
  <span class="tok-type">int</span> <span class="tok-key">age</span>:</code></pre>

      <h3>Nullable Fields</h3>
      <p>Fields marked with a question mark (<code>?</code>) are nullable and can have the value <code>null</code>.</p>

      <pre><code><span class="tok-key">Person</span>:
  <span class="tok-type">str</span> <span class="tok-key">name</span>:
 ?<span class="tok-type">str</span> <span class="tok-key">nickname</span>:  <span class="tok-comment"># Optional field</span>
 ?<span class="tok-type">int</span> <span class="tok-key">age</span>:</code></pre>

      <h3>Array Fields</h3>
      <p>Fields with the <code>[]</code> suffix are arrays of the specified type.</p>

      <pre><code><span class="tok-key">Application</span>:
  <span class="tok-type">str</span> <span class="tok-key">name</span>:
  <span class="tok-type">str[]</span> <span class="tok-key">tags</span>:  <span class="tok-comment"># Array of strings</span>
  <span class="tok-type">int[]</span> <span class="tok-key">ports</span>:</code></pre>

      <h3>Struct-Typed Fields</h3>
      <p>Fields can reference other struct types.</p>

      <pre><code><span class="tok-key">Database</span>:
 *<span class="tok-type">str</span> <span class="tok-key">name</span>:
  <span class="tok-type">str</span> <span class="tok-key">host</span>:
  <span class="tok-type">int</span> <span class="tok-key">port</span>:

<span class="tok-key">Application</span>:
  <span class="tok-type">str</span> <span class="tok-key">name</span>:
  <span class="tok-type">Database</span> <span class="tok-key">database</span>:  <span class="tok-comment"># References a Database instance</span></code></pre>

      <h2 id="defaults">Default Values</h2>
      <p>Default values can be specified in the schema declaration or as separate attribute assignments.</p>

      <h3>Inline Defaults</h3>
      <pre><code><span class="tok-key">Server</span>:
  <span class="tok-type">str</span> <span class="tok-key">hostname</span>:
  <span class="tok-type">int</span> <span class="tok-key">port</span>: <span class="tok-number">80</span>  <span class="tok-comment"># Default port</span>
  <span class="tok-type">bool</span> <span class="tok-key">ssl</span>: <span class="tok-boolean">false</span>  <span class="tok-comment"># Default SSL setting</span></code></pre>

      <h3>Separate Default Declarations</h3>
      <p>Defaults can also be set after the schema using indented attribute assignments.</p>

      <pre><code><span class="tok-key">Server</span>:
  <span class="tok-type">str</span> <span class="tok-key">hostname</span>:
  <span class="tok-type">int</span> <span class="tok-key">port</span>:
  <span class="tok-type">bool</span> <span class="tok-key">ssl</span>:
  <span class="tok-key">port</span>: <span class="tok-number">80</span>  <span class="tok-comment"># Default port value</span>
  <span class="tok-key">ssl</span>: <span class="tok-boolean">false</span></code></pre>

      <h3>Multiple Struct Blocks with Different Defaults</h3>
      <p>You can create multiple struct blocks for the same type with different default values. Each block can define its own defaults and instances. This is useful for organizing instances by environment, region, or other categories.</p>

      <pre><code><span class="tok-comment"># First Server block with development defaults</span>
<span class="tok-key">Server</span>:
 *<span class="tok-type">str</span> <span class="tok-key">hostname</span>:
  <span class="tok-type">int</span> <span class="tok-key">port</span>:
  <span class="tok-type">bool</span> <span class="tok-key">ssl</span>:
  <span class="tok-key">port</span>: <span class="tok-number">8080</span>  <span class="tok-comment"># Dev default</span>
  <span class="tok-key">ssl</span>: <span class="tok-boolean">false</span>
  - <span class="tok-string">dev1.internal</span>
  - <span class="tok-string">dev2.internal</span>

<span class="tok-comment"># Second Server block with production defaults</span>
<span class="tok-key">Server</span>:
  <span class="tok-key">port</span>: <span class="tok-number">443</span>  <span class="tok-comment"># Production default</span>
  <span class="tok-key">ssl</span>: <span class="tok-boolean">true</span>
  - <span class="tok-string">prod1.example.com</span>
  - <span class="tok-string">prod2.example.com</span>

<span class="tok-comment"># Third Server block with custom defaults</span>
<span class="tok-key">Server</span>:
  <span class="tok-key">port</span>: <span class="tok-number">3000</span>  <span class="tok-comment"># API default</span>
  <span class="tok-key">ssl</span>: <span class="tok-boolean">true</span>
  - <span class="tok-string">api1.example.com</span>
  - <span class="tok-string">api2.example.com</span></code></pre>

      <p>All instances from all blocks are collected together into a single array for the <code>Server</code> type.</p>

      <h2 id="instances">Struct Instances</h2>
      <p>Struct instances are created using a dash (<code>-</code>) followed by field values. Values can be provided in order or as named assignments. Trailing commas are allowed in instance declarations.</p>

      <h3>Positional Values</h3>
      <p>When using positional values, they must match the order of struct's fields.</p>

      <pre><code><span class="tok-key">User</span>:
 *<span class="tok-type">str</span> <span class="tok-key">username</span>:
  <span class="tok-type">str</span> <span class="tok-key">email</span>:
  <span class="tok-type">int</span> <span class="tok-key">age</span>:
  - <span class="tok-string">alice</span>, <span class="tok-string">alice@example.com</span>, <span class="tok-number">30</span>
  - <span class="tok-string">bob</span>, <span class="tok-string">bob@example.com</span>, <span class="tok-number">25</span>,  <span class="tok-comment"># Trailing comma allowed</span></code></pre>

      <h3>Named Values</h3>
      <p>Values can be explicitly named using <code>field_name: value</code> syntax. These can be ommitted if using defaults, and for clarity should follow the order of field names in the schema, but technically can be in any order.</p>

      <pre><code><span class="tok-key">User</span>:
 *<span class="tok-type">str</span> <span class="tok-key">username</span>:
  <span class="tok-type">str</span> <span class="tok-key">email</span>:
  <span class="tok-type">int</span> <span class="tok-key">age</span>:
  - <span class="tok-key">username</span>: <span class="tok-string">alice</span>, <span class="tok-key">email</span>: <span class="tok-string">alice@example.com</span>, <span class="tok-key">age</span>: <span class="tok-number">30</span>
  - <span class="tok-key">username</span>: <span class="tok-string">bob</span>, <span class="tok-key">email</span>: <span class="tok-string">bob@example.com</span>, <span class="tok-key">age</span>: <span class="tok-number">25</span></code></pre>

      <h3>Mixed Syntax</h3>
      <p>Positional and named values can be mixed, with positional values coming first.</p>

      <pre><code><span class="tok-key">User</span>:
 *<span class="tok-type">str</span> <span class="tok-key">username</span>:
  <span class="tok-type">str</span> <span class="tok-key">email</span>:
  <span class="tok-type">int</span> <span class="tok-key">age</span>:
  - <span class="tok-string">alice</span>, <span class="tok-key">email</span>: <span class="tok-string">alice@example.com</span>, <span class="tok-key">age</span>: <span class="tok-number">30</span></code></pre>

      <h3>Line Continuation</h3>
      <p>Long instance declarations can be split across multiple lines using a backslash (<code>\</code>) at the end of a line.</p>

      <pre><code><span class="tok-key">Server</span>:
 *<span class="tok-type">str</span> <span class="tok-key">hostname</span>:
  <span class="tok-type">int</span> <span class="tok-key">port</span>:
  <span class="tok-type">bool</span> <span class="tok-key">ssl</span>:
  <span class="tok-type">str</span> <span class="tok-key">description</span>:
  - <span class="tok-key">hostname</span>: <span class="tok-string">server1.example.com</span>, <span class="tok-key">port</span>: <span class="tok-number">443</span>, <span class="tok-key">ssl</span>: <span class="tok-boolean">true</span>, \
    <span class="tok-key">description</span>: <span class="tok-string">"Production web server"</span></code></pre>

      <h2 id="references">Object References</h2>
      <p>Objects with primary keys can be referenced by other objects. References use the syntax <code>TypeName(primary_key_value)</code>.</p>

      <h3>Single-Key References</h3>
      <pre><code><span class="tok-key">Database</span>:
 *<span class="tok-type">str</span> <span class="tok-key">name</span>:
  <span class="tok-type">str</span> <span class="tok-key">host</span>:
  <span class="tok-type">int</span> <span class="tok-key">port</span>:
  - <span class="tok-string">main_db</span>, <span class="tok-string">db.example.com</span>, <span class="tok-number">3306</span>
  - <span class="tok-string">cache_db</span>, <span class="tok-string">redis.example.com</span>, <span class="tok-number">6379</span>

<span class="tok-key">Application</span>:
  <span class="tok-type">str</span> <span class="tok-key">name</span>:
  <span class="tok-type">Database</span> <span class="tok-key">database</span>:
  - <span class="tok-string">web_app</span>, <span class="tok-obj">Database(main_db)</span>  <span class="tok-comment"># References Database with name "main_db"</span>
  - <span class="tok-string">cache_service</span>, <span class="tok-obj">Database(cache_db)</span></code></pre>

      <h3>Inline Object Creation</h3>
      <p>Objects can be created inline by providing all required field values in the reference syntax. Trailing commas are allowed in inline object creation.</p>

      <pre><code><span class="tok-key">Person</span>:
  <span class="tok-type">str</span> <span class="tok-key">name</span>:
  <span class="tok-type">int</span> <span class="tok-key">age</span>:

<span class="tok-key">Server</span>:
  <span class="tok-type">str</span> <span class="tok-key">hostname</span>:
  <span class="tok-type">Person</span> <span class="tok-key">owner</span>:
  - <span class="tok-string">server1</span>, <span class="tok-obj">Person(Alice, 30,)</span>  <span class="tok-comment"># Creates Person inline, trailing comma allowed</span></code></pre>

      <h2 id="templates">String Templates</h2>
      <p>String values support template interpolation using curly braces <code>{field}</code>. Templates are resolved after all instances are created.</p>

      <h3>Field References</h3>
      <pre><code><span class="tok-key">Server</span>:
 *<span class="tok-type">str</span> <span class="tok-key">name</span>:
  <span class="tok-type">str</span> <span class="tok-key">domain</span>:
  <span class="tok-type">str</span> <span class="tok-key">url</span>:
  - <span class="tok-string">web1</span>, <span class="tok-string">example.com</span>, <span class="tok-string">"https://{name}.{domain}"</span>  <span class="tok-comment"># Resolves to "https://web1.example.com"</span></code></pre>

      <h3>Nested Field Access</h3>
      <p>Templates can access fields of referenced objects using dot notation.</p>

      <pre><code><span class="tok-key">Host</span>:
 *<span class="tok-type">str</span> <span class="tok-key">name</span>:
  <span class="tok-type">str</span> <span class="tok-key">ip</span>:
  - <span class="tok-string">server1</span>, <span class="tok-string">192.168.1.10</span>

<span class="tok-key">Application</span>:
  <span class="tok-type">str</span> <span class="tok-key">name</span>:
  <span class="tok-type">Host</span> <span class="tok-key">host</span>:
  <span class="tok-type">str</span> <span class="tok-key">connection</span>:
  - <span class="tok-string">web_app</span>, <span class="tok-obj">Host(server1)</span>, <span class="tok-string">"{name} @ {host.ip}"</span>  <span class="tok-comment"># Resolves to "web_app @ 192.168.1.10"</span></code></pre>

      <h3>Parent References</h3>
      <p>Templates can reference parent object fields using explicit <code>..</code> prefix. Each additional dot traverses one level up in the parent hierarchy. This provides explicit control over scope traversal.</p>

      <pre><code><span class="tok-key">Project</span>:
 *<span class="tok-type">str</span> <span class="tok-key">name</span>:
  <span class="tok-type">str</span> <span class="tok-key">status</span>:
  <span class="tok-key">Task</span> <span class="tok-key">task</span>:
  - <span class="tok-string">WebApp</span>, <span class="tok-string">active</span>, <span class="tok-obj">Task("Setup for {..name}")</span>

<span class="tok-key">Task</span>:
  <span class="tok-type">str</span> <span class="tok-key">description</span>:</code></pre>

      <p>The <code>{..name}</code> reference explicitly accesses the parent Project's <code>name</code> field, making scope relationships clear and predictable.</p>

      <h3>Global Variable Access</h3>
      <p>Struct instances must use explicit <code>global.</code> syntax to access global variables, ensuring clarity and preventing naming conflicts. Global variables can reference other globals directly.</p>

      <pre><code><span class="tok-type">str</span> <span class="tok-key">company</span>: <span class="tok-string">"TechCorp"</span>
<span class="tok-type">str</span> <span class="tok-key">region</span>: <span class="tok-string">"us-west"</span>

<span class="tok-key">Person</span>:
 *<span class="tok-type">str</span> <span class="tok-key">name</span>:
  <span class="tok-type">str</span> <span class="tok-key">company</span>:
  <span class="tok-type">str</span> <span class="tok-key">email</span>:
  - <span class="tok-string">Alice</span>, <span class="tok-string">"{global.company}"</span>, <span class="tok-string">"{name}@{global.company}.com"</span>

<span class="tok-comment"># Global variables access other globals directly</span>
<span class="tok-type">str</span> <span class="tok-key">server_name</span>: <span class="tok-string">"{company}-api-{region}"</span>  <span class="tok-comment"># Resolves to "TechCorp-api-us-west"</span></code></pre>

      <p>The explicit <code>global.</code> prefix makes it clear when struct instances are accessing global scope, preventing confusion with local field names. If a struct has a field named <code>global</code>, that field will take precedence over the global scope access mechanism. Global variables themselves can reference other globals directly without the prefix.</p>

      <h2 id="include">Include Directive</h2>
      <p>The <code>#include</code> directive allows splitting configuration across multiple files.</p>

      <pre><code><span class="tok-comment">#include shared_config.tyco</span>
<span class="tok-comment">#include databases.tyco</span>

<span class="tok-key">Application</span>:
  <span class="tok-type">str</span> <span class="tok-key">name</span>:
  <span class="tok-type">Database</span> <span class="tok-key">db</span>:
  - <span class="tok-string">main_app</span>, <span class="tok-obj">Database(primary)</span></code></pre>

      <div class="note">
        <p><strong>Note:</strong> Included files must not redefine struct types already defined in the including file. Implementations may process includes recursively.</p>
      </div>

      <h2 id="directory-loading">Directory Loading</h2>
      <p>Modern Tyco parsers support loading entire directory structures, automatically discovering and processing all <code>.tyco</code> files recursively.</p>

      <h3>Loading Directories</h3>
      <p>When a directory path is provided to the loader, all <code>.tyco</code> files within that directory and subdirectories are processed as a single configuration context:</p>

      <pre><code><span class="tok-comment"># Python example</span>
from tyco import load

<span class="tok-comment"># Load all .tyco files in config/ directory recursively</span>
context = load('config/')
data = context.to_json()</code></pre>

      <p>Directory structure example:</p>
      <pre><code>config/
├── globals.tyco          <span class="tok-comment"># Global settings</span>
├── databases.tyco        <span class="tok-comment"># Database definitions</span>
├── environments/
│   ├── production.tyco   <span class="tok-comment"># Production config</span>
│   └── staging.tyco      <span class="tok-comment"># Staging config</span>
└── services/
    ├── web.tyco          <span class="tok-comment"># Web service config</span>
    └── api.tyco          <span class="tok-comment"># API service config</span></code></pre>

      <h3>Benefits of Directory Loading</h3>
      <ul>
        <li><strong>Organization</strong> — Split large configurations across logical file boundaries</li>
        <li><strong>Team Workflow</strong> — Multiple team members can work on different configuration areas</li>
        <li><strong>Environment Separation</strong> — Separate files for different deployment environments</li>
        <li><strong>Modular Design</strong> — Reusable configuration components</li>
      </ul>

      <div class="note">
        <p><strong>Note:</strong> All files are processed in the same context, so struct definitions and references work across file boundaries. However, duplicate struct type definitions will cause errors.</p>
      </div>

      <h2 id="validation">Validation</h2>
      <p>Some Tyco parser implementations support language-specific validation modules that provide custom validation logic and constructors for configuration objects.</p>

      <h3>Python Validation Modules</h3>
      <p>The Python parser automatically loads corresponding <code>.py</code> files when processing <code>.tyco</code> files. If <code>config.tyco</code> exists alongside <code>config.py</code>, the Python module is imported and can provide custom validation:</p>

      <pre><code><span class="tok-comment"># config.tyco</span>
<span class="tok-key">User</span>:
 *<span class="tok-type">str</span> <span class="tok-key">username</span>:
  <span class="tok-type">str</span> <span class="tok-key">email</span>:
  <span class="tok-type">int</span> <span class="tok-key">age</span>:
  - <span class="tok-string">alice</span>, <span class="tok-string">alice@example.com</span>, <span class="tok-number">30</span>
  - <span class="tok-string">bob</span>, <span class="tok-string">invalid-email</span>, <span class="tok-number">25</span></code></pre>

      <pre><code><span class="tok-comment"># config.py</span>
import re
from tyco.parser import Struct

class User(Struct):
    def validate(self):
        <span class="tok-comment"># Custom email validation</span>
        email_pattern = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
        if not re.match(email_pattern, self.email):
            raise ValueError(f"Invalid email format: {self.email}")
        
        <span class="tok-comment"># Age validation</span>
        if self.age < 0:
            raise ValueError(f"Age must be positive: {self.age}")
</code></pre>

      <h3>Validation Features</h3>
      <ul>
        <li><strong>Custom Constructors</strong> — Override default object creation with specialized logic</li>
        <li><strong>Field Validation</strong> — Validate individual fields with custom rules</li>
        <li><strong>Cross-Field Validation</strong> — Validate relationships between multiple fields</li>
        <li><strong>Type-Specific Logic</strong> — Different validation per struct type</li>
        <li><strong>Integration</strong> — Validation runs automatically during parsing</li>
      </ul>

      <h3>Error Handling</h3>
      <p>Validation errors are reported with clear messages indicating which configuration objects failed validation:</p>

      <pre><code>ValueError: Invalid email format: invalid-email
  in User(bob) at config.tyco:5</code></pre>

      <div class="note">
        <p><strong>Note:</strong> Validation modules are optional. If a <code>.py</code> file cannot be loaded or contains errors, configuration parsing continues without validation. This ensures that malformed validation code doesn't break configuration loading.</p>
      </div>

      <h2 id="abnf">ABNF Grammar</h2>
      <p>This section provides a formal grammar for Tyco in Augmented Backus-Naur Form (ABNF) per RFC 5234.</p>

      <pre><code><span class="tok-comment">; Document Structure</span>
<span class="tok-key">tyco-document</span> = *( global-attr / struct-def / include / comment / newline )

<span class="tok-comment">; Global Attributes</span>
<span class="tok-key">global-attr</span> = [ nullable ] type-name [ array-marker ] ws+ identifier ws* ":" ws* value newline

<span class="tok-comment">; Struct Definition</span>
<span class="tok-key">struct-def</span> = struct-header schema-section [ defaults-section ] [ instances-section ]
<span class="tok-key">struct-header</span> = identifier ":" newline
<span class="tok-key">schema-section</span> = 1*( ws+ [ modifier ] type-name [ array-marker ] ws+ identifier ws* ":" [ ws* value ] newline )

<span class="tok-comment">; Modifiers</span>
<span class="tok-key">modifier</span> = primary-key / nullable
<span class="tok-key">primary-key</span> = "*"
<span class="tok-key">nullable</span> = "?"
<span class="tok-key">array-marker</span> = "[]"

<span class="tok-comment">; Default Values</span>
<span class="tok-key">defaults-section</span> = *( ws+ identifier ws* ":" ws* value newline )

<span class="tok-comment">; Instances</span>
<span class="tok-key">instances-section</span> = *( ws+ "-" ws* instance-values [ "\" newline ] newline )
<span class="tok-key">instance-values</span> = value *( ws* "," ws* [ identifier ws* ":" ws* ] value )

<span class="tok-comment">; Values</span>
<span class="tok-key">value</span> = string / integer / float / boolean / null / array / reference
<span class="tok-key">string</span> = basic-string / multiline-basic / literal-string / multiline-literal
<span class="tok-key">basic-string</span> = %x22 *( string-char / escape-seq ) %x22
<span class="tok-key">multiline-basic</span> = %x22.22.22 *( string-char / newline / escape-seq / line-ending-backslash ) %x22.22.22
<span class="tok-key">literal-string</span> = %x27 *literal-char %x27
<span class="tok-key">multiline-literal</span> = %x27.27.27 *( literal-char / newline ) %x27.27.27

<span class="tok-comment">; Escape Sequences</span>
<span class="tok-key">escape-seq</span> = "\\" ( %x62 / %x74 / %x6E / %x66 / %x72 / %x22 / %x5C / unicode-escape )
<span class="tok-key">unicode-escape</span> = "u" 4HEXDIG / "U" 8HEXDIG
<span class="tok-key">line-ending-backslash</span> = "\\" ws* newline ws*

<span class="tok-comment">; Numbers</span>
<span class="tok-key">integer</span> = [ "+" / "-" ] ( decimal / hexadecimal / octal / binary )
<span class="tok-key">decimal</span> = 1*DIGIT
<span class="tok-key">hexadecimal</span> = "0x" 1*HEXDIG
<span class="tok-key">octal</span> = "0o" 1*( %x30-37 )
<span class="tok-key">binary</span> = "0b" 1*BIT
<span class="tok-key">float</span> = [ "+" / "-" ] 1*DIGIT "." 1*DIGIT

<span class="tok-comment">; Boolean and Null</span>
<span class="tok-key">boolean</span> = "true" / "false"
<span class="tok-key">null</span> = "null"

<span class="tok-comment">; Array</span>
<span class="tok-key">array</span> = "[" [ ws* value *( ws* "," ws* value ) [ ws* "," ] ] ws* "]"

<span class="tok-comment">; Reference</span>
<span class="tok-key">reference</span> = identifier "(" ( identifier / ( value *( "," ws* value ) ) ) ")"

<span class="tok-comment">; Types</span>
<span class="tok-key">type-name</span> = "str" / "int" / "float" / "bool" / "date" / "time" / "datetime" / identifier

<span class="tok-comment">; Identifiers</span>
<span class="tok-key">identifier</span> = ( ALPHA / "_" ) *( ALPHA / DIGIT / "_" / "-" )

<span class="tok-comment">; Comments and Includes</span>
<span class="tok-key">comment</span> = "#" *( %x09 / %x20-10FFFF ) newline
<span class="tok-key">include</span> = "#include" ws+ path newline
<span class="tok-key">path</span> = 1*( ALPHA / DIGIT / "." / "/" / "_" / "-" )

<span class="tok-comment">; Whitespace</span>
<span class="tok-key">ws</span> = %x20 / %x09  <span class="tok-comment">; Space or Tab</span>
<span class="tok-key">newline</span> = %x0A / %x0D.0A  <span class="tok-comment">; LF or CRLF</span>

<span class="tok-comment">; Character Classes</span>
<span class="tok-key">string-char</span> = %x20-21 / %x23-5B / %x5D-10FFFF  <span class="tok-comment">; Any Unicode except " and \</span>
<span class="tok-key">literal-char</span> = %x20-26 / %x28-10FFFF  <span class="tok-comment">; Any Unicode except '</span>
</code></pre>

    </div>
  </div>

  <script>
    // Handle spec version selection
    document.getElementById('spec-version').addEventListener('change', function(e) {
      const version = e.target.value;
      if (version) {
        window.location.href = `v${version}.html`;
      }
    });

    // Highlight active section in sidebar as user scrolls
    const sections = document.querySelectorAll('h1[id], h2[id], h3[id]');
    const navLinks = document.querySelectorAll('.spec-sidebar a');

    function updateActiveLink() {
      let currentSection = '';
      
      sections.forEach(section => {
        const sectionTop = section.offsetTop - 100;
        if (window.scrollY >= sectionTop) {
          currentSection = section.getAttribute('id');
        }
      });

      navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === `#${currentSection}`) {
          link.classList.add('active');
        }
      });
    }

    window.addEventListener('scroll', updateActiveLink);
    updateActiveLink(); // Set initial active state
  </script>
</body>
</html>
